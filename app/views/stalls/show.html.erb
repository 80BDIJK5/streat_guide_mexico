<div  class="container-show-stall">
  <!-- number of pictures a page will have? -->
  <% imgCount = @stall.photos.count %>
  <div class="row justify-content-start">
    <% if @stall.photos.attached? %>
      <div class="card col-7">
        <%= cl_image_tag @stall.photos.first.key, crop: :fill, class: 'card-img-top', style: 'object-fit: contain; height: 400px;' %>
    <% else %>
      <div class="card col-7">
        <img src="https://st.depositphotos.com/3097111/4720/v/950/depositphotos_47208671-stock-illustration-photo-coming-soon-image-vector.jpg" />
    <% end %>
    <!-- Insert Bootstrap for image carousel here -->
    <!-- Iterate through each image and add them to a carousel view -->
    <% if imgCount != 0 %>
      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <%= cl_image_tag @stall.photos.last.key, crop: :fill, class: 'd-block w-100', style: 'object-fit: contain; height: 300px;'%>
          </div>
          <% @stall.photos.each do |image | %>
            <div class="carousel-item">
              <%= cl_image_tag image.key, crop: :fill, class: 'd-block w-100', style: 'object-fit: contain; height: 300px;'%>
            </div>
          <% end %>
          <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>
  <% end %>
</div>
    <!-- Right side section -->
    <div class="col-5">
      <h1 class="text-center"> <%= @stall.name %> </h1>
      <h2>About us: </h2>
      <p><%= @stall.description %></p>
      <p> Address: <%=@stall.address%> <p>
      <h2>Services</h2>
      <% if @stall.services.nil? %>
        <p><span class="fa fa-star">Spanish/English</span> </p>
        <p><span class="fa fa-star">Best experience</span> </p>
        <p><span class="fa fa-star">Debit/Credit cards</span> </p>
      <% else %>
        <% @stall.services.drop(1).each do |service| %>
          <p><span class="fa fa-star">
            <%= service %>
          </span> </p>
        <% end %>
      <% end %>
    <div id= "buttons"class="d-flex flex-row justify-content-around bd-highlight mb-3 align-items-end">
      <div>
        <%= button_tag "Leave a review", class: "btn btn-main click-me" %>
      </div>
      <div>
        <%= link_to "Get Directions", stalls_path,  class: "btn btn-second" %>
      </div>
    </div>
  </div>
  </div>
  <br>
  <!-- Include a section for Location, Hours and Reviews -->
  <div class="row justify-content-start">
    <div class="card col-7">
      <h2>How to find us? </h2>
      <p>Insert map here</p>
    </div>
    <div class="col-5">
  <div id="insert-here">
    <%= render "reviews/reviewform" %>
  </div>
  <!-- Once Leave a Review is clicked, the following code needs to be executed withing div "insert-here" -->
  <% if @stall.reviews.empty? %>
    <h2 class="text-center"> Oops! Doesnt' seem like anybody reviewed this stall yet... Do you wanna leave a review?</h2>
  <% else %>
    <h2 class="text-center">What others are talking about us?</h2>
    <% @stall.reviews.each do |review| %>
      <div class="review-card">
        <div class="review-card-product-infos">
          <h2>
            <%= review.title %>
          </h2>
          <p>
          <% review.rating.times do |rating| %>
              <span class="fa fa-star checked"></span>
          <% end %>
          <% ratingDelta = 5 - review.rating %>
          <% ratingDelta.times do |time| %>
            <span class="fa fa-star"></span>
          <% end %>
          </p>
          <p>
            <%= review.comment %>
          </p>
        </div>
          <img class="avatar-large" src='https://kitt.lewagon.com/placeholder/users/Eschults' width="50px" />
      </div>
    <% end %>
  <% end %>
  </div>
</div>
